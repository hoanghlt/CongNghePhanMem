
@{
    ViewBag.Title = "Hethongcuahang";
    Layout = "~/Views/Shared/Layout.cshtml";
}
@section API{
    <style>
    #map_canvas {
        width: 99%;
        height: 400px;
        border: solid 1px #ccc;
    }
</style>
<script>
    function initMap() {
        var latlng = new google.maps.LatLng(10.802145, 106.715001); //Tọa độ cửa hàng
        var map = new google.maps.Map(document.getElementById('map_canvas'), {
            center: latlng,
            zoom: 16 //Độ phóng to của bản đồ
        });
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            title: "Cửa hàng di động thông minh VSMobile" //Tên hiển thị khi đưa chuột vào địa điểm
        });
        google.maps.event.addListener(marker, 'click', function () {
            infowindow.open(map, marker);
        });
    }
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCpMnK0H_K6RcyTPm2NefXchg9QbO0mCio&callback=initMap">
</script>
<script>
        function timDuongDi() {
            var latlng = new google.maps.LatLng(10.802145, 106.715001); //Vị trí của cửa hàng
            var map = new google.maps.Map(document.getElementById('map_canvas'), {
                center: latlng,
                zoom: 16
            });
            var infoWindow = new google.maps.InfoWindow({ map: map });

            // Try HTML5 geolocation.
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    infoWindow.setPosition(pos);
                    infoWindow.setContent('Vị trí của bạn');
                    map.setCenter(pos);

                    var directionsDisplay = new google.maps.DirectionsRenderer({
                        map: map
                    });
                    var request = {
                        destination: latlng, // Điểm đến là vị trí cửa hàng
                        origin: pos, // Điểm bắt đầu là vị trí hiện tại của bạn
                        travelMode: google.maps.TravelMode.DRIVING
                    };
                    var directionsService = new google.maps.DirectionsService();
                    directionsService.route(request, function (response, status) {
                        if (status == google.maps.DirectionsStatus.OK) {
                            // Display the route on the map.
                            directionsDisplay.setDirections(response);
                        }
                    });
                }, function () {
                    handleLocationError(true, infoWindow, map.getCenter());
                });
            } else {
                // Browser doesn't support Geolocation
                handleLocationError(false, infoWindow, map.getCenter());
            }
        }

        function handleLocationError(browserHasGeolocation, infoWindow, pos) {
            infoWindow.setPosition(pos);
            infoWindow.setContent(browserHasGeolocation ?
                                  'Error: The Geolocation service failed.' :
                                  'Error: Your browser doesn\'t support geolocation.');
        }

    </script>

}

<div class="main-container col2-right-layout">
    <div class="main container">
        <section class="col-main col-sm-9 wow bounceInUp animated">

            <p style="text-align: justify;"><span style="color: #ea377c;"><strong>VSMobile-Sơ đồ hướng dẫn</strong></span></p>
            <p style="text-align: justify;"><span style="color: #000;"><strong>Chi nhánh Bình Thạnh</strong></span></p>
            <div id="map_canvas"></div>
            <br/>
            <button class="btn btn-primary" style="float:right" onclick="timDuongDi()">Tìm đường đi</button>
            
        </section>
        <aside class="col-right sidebar col-sm-3 wow bounceInUp animated">

            <div class="side-nav-categories">
                <div class="block-title"><h2>Danh mục sản phẩm</h2></div>
                <div class="box-content box-category">
                    @Html.Action("Menuleft", "Dssanpham")
                </div>
            </div>


        </aside>
    </div>
</div>

